<?xml version="1.0" encoding="UTF-8"?>
<WCS_Capabilities  version="1.0.0"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>
  <Service>
    <label>NBIC WCS powered by TiTiler</label>
    <description>Serverless WCS to serve NBIC data</description>
    <name>WCS</name>
    <fees>NONE</fees>
    <AccessConstraints>NONE</AccessConstraints>
    <responsibleParty>
      <individualName>National Bushfire Intelligence Capability</individualName>
      <organisationName>CSIRO</organisationName>
      <OnlineResource xlink:type="simple" xlink:href="https://research.csiro.au/nbic/"/>
    </responsibleParty>
  </Service>

  <Capability>
    <Request>
      <GetCapabilities>
        <DCPType>
          <HTTP>
            <Get>
              <OnlineResource xlink:type="simple" xlink:href="{{ request_url|escape }}"/>
            </Get>
          </HTTP>
        </DCPType>
      </GetCapabilities>
      <DescribeCoverage>
        <DCPType>
          <HTTP>
            <Get>
              <OnlineResource xlink:type="simple" xlink:href="{{ request_url|escape }}"/>
            </Get>
          </HTTP>
        </DCPType>
      </DescribeCoverage>
      <GetCoverage>
        <DCPType>
          <HTTP>
            <Get>
              <OnlineResource xlink:type="simple" xlink:href="{{ request_url|escape }}"/>
            </Get>
          </HTTP>
        </DCPType>
      </GetCoverage>
    </Request>
    <Exception>
      <Format>application/vnd.ogc.se_xml</Format>
    </Exception>
  </Capability>


  <!-- <ServiceMetadata>
    {% for format in formats %}
    <formatSupported>{{ format }}</formatSupported>
    {% endfor %}
    <Extension>
      <CrsMetadata>
        {% for crs in available_epsgs %}
        <crsSupported>{{crs}}</crsSupported>
        {% endfor %}
      </CrsMetadata>
    </Extension>
  </ServiceMetadata> -->

  <ContentMetadata>
    <!-- For each coverage, you can list coverage id, bounding box, etc. -->
    {% for cov_id, cov_info in coverages.items() %}
    <CoverageOfferingBrief>
      <name>{{ cov_info['layer'] }}</name>
      <label>{{ cov_id }}</label>
      <lonLatEnvelope srsName="urn:ogc:def:crs:OGC:1.3:CRS84">
        <pos dimension="2">{{ cov_info["bounds_wgs84"][0] }} {{ cov_info["bounds_wgs84"][1] }}</pos>
        <pos dimension="2">{{ cov_info["bounds_wgs84"][2] }} {{ cov_info["bounds_wgs84"][3] }}</pos>
      </lonLatEnvelope>
    </CoverageOfferingBrief>
    {% endfor %}
  </ContentMetadata>
</WCS_Capabilities>