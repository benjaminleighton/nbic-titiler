<?xml version="1.0" encoding="UTF-8"?>
<wcs:CoverageDescription version="1.0.0" updateSequence="0" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:gml='http://www.opengis.net/gml/3.0.0'
  xmlns:wcs='http://www.opengis.net/wcs/1.0.0'>
  {% for cov_id, cov_info in coverages.items() %}
  <wcs:CoverageOffering>
    <gml:description>{{ cov_id }}</gml:description>
    <gml:name>{{ cov_id }}</gml:name>
    <gml:label>{{ cov_id }}</gml:label>
    <wcs:lonLatEnvelope srsName="urn:ogc:def:crs:OGC:1.3:CRS84">
      <gml:pos>{{ cov_info['bounds_wgs84'][0] }} {{ cov_info['bounds_wgs84'][1] }}</gml:pos>
      <gml:pos>{{ cov_info['bounds_wgs84'][2] }} {{ cov_info['bounds_wgs84'][3] }}</gml:pos>
    </wcs:lonLatEnvelope>
    <!-- <wcs:CoverageId>{{ cov_info['layer'] }}</wcs:CoverageId/> -->

    <wcs:domainSet>
      <wcs:spatialDomain>
        <!-- <gml:Envelope srsName="{{ cov_info['crs'] }}"
          srsDimension="2">
          <gml:pos>{{ cov_info['lower_corner'][0] }} {{ cov_info['lower_corner'][1] }}</gml:pos>
          <gml:pos>{{ cov_info['upper_corner'][0] }} {{ cov_info['upper_corner'][1] }}</gml:pos>
        </gml:Envelope> -->
        <gml:Envelope srsName="urn:ogc:def:crs:OGC:1.3:CRS84"
          srsDimension="2">
          <gml:pos>{{ cov_info['bounds_wgs84'][0] }} {{ cov_info['bounds_wgs84'][1] }}</gml:pos>
          <gml:pos>{{ cov_info['bounds_wgs84'][2] }} {{ cov_info['bounds_wgs84'][3] }}</gml:pos>
        </gml:Envelope>
        <gml:RectifiedGrid srsName="{{ cov_info['crs'] }}" dimension="2">
          <gml:limits>
            <gml:GridEnvelope>
              <gml:low>0 0</gml:low>
              <gml:high>{{ cov_info['axis_shape'][0] }} {{ cov_info['axis_shape'][1] }}</gml:high>
            </gml:GridEnvelope>
          </gml:limits>
          <gml:axisName>{{ cov_info['axis_labels'][0] }}</gml:axisName>
          <gml:axisName>{{ cov_info['axis_labels'][1] }}</gml:axisName>
          <gml:origin srsName="{{ cov_info['crs'] }}">
            <gml:pos>
            {{ cov_info['lower_corner'][0] }} {{ cov_info['lower_corner'][1] }}
            </gml:pos>
          </gml:origin>
          <gml:offsetVector>{{ cov_info['resolution'][0] }} 0.0</gml:offsetVector>
          <gml:offsetVector>0.0 {{ -cov_info['resolution'][1] }}</gml:offsetVector>
        </gml:RectifiedGrid>
      </wcs:spatialDomain>
    </wcs:domainSet>

    <wcs:rangeSet>
      <wcs:RangeSet>
        <gml:name>Band_1</gml:name>
        <gml:label>Single Band</gml:label>
        <axisDescription>
          <AxisDescription>
            <name>Band_1</name>
            <label>Single Band</label>
            <values>
              <singleValue>band_1</singleValue>
            </values>
          </AxisDescription>
        </axisDescription>
        <nullValues>
          <singleValue>{{ cov_info['nodata'] }}</singleValue>
        </nullValues>
      </wcs:RangeSet>
    </wcs:rangeSet>

    <supportedCRSs>
      {% for crs in available_epsgs %}
      <requestResponseCRSs>{{ crs }}</requestResponseCRSs>
      {% endfor %}

      <nativeCRSs>{{ cov_info['crs'] }}</nativeCRSs>
    </supportedCRSs>

    <supportedFormats nativeFormat="GeoTIFF">
      <formats>GeoTIFF</formats>
    </supportedFormats>

    <supportedInterpolations default="nearest">
      <interpolationMethod>nearest</interpolationMethod>
    </supportedInterpolations>
  </wcs:CoverageOffering>
  {% endfor %}
</wcs:CoverageDescription>